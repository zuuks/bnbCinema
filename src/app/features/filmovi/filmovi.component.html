<div class="container">
  <h1>Lista Filmova</h1>

  <!-- ğŸ” Input polja za pretragu -->
  <div class="search-container">
      <input type="text" class="search-bar" placeholder="PretraÅ¾i po naslovu..." [(ngModel)]="searchTitle" (input)="filterMovies()">
      <input type="text" class="search-bar" placeholder="PretraÅ¾i po reÅ¾iseru..." [(ngModel)]="searchDirector" (input)="filterMovies()">
      <input type="date" class="search-bar" [(ngModel)]="searchYear" (change)="filterMovies()" max="9999-12-31">
  </div>
<!-- ğŸï¸ Prikaz filmova -->
<div class="svifilmovi">
    <div class="lista" *ngFor="let film of filteredFilmovi">
        <div class="film">
            <div class="filmgore">
                <img [src]="film.poster" alt="{{ film.title }}" (click)="openFilmDetails(film)">
            </div>
            <div class="filmdole">
                <div class="film-info">
                    <h2>{{ film.title }}</h2>
                    <a [attr.href]="'/rezervacija/' + film.title" class="rezervisi-button">ğŸŸï¸ RezerviÅ¡i</a>
                    <button class="korpa-button" (click)="dodajUKorpu(film)">ğŸ›’ Dodaj u korpu</button>
                </div>
            </div>
        </div>

        </div>
    </div>
</div>





<!-- ğŸŸï¸ Lista rezervisanih filmova -->
<div *ngIf="rezervisaniFilmovi.length > 0" class="rezervisani-container">
    <h2>ğŸŸï¸ Moje rezervacije</h2>
    <ul class="rezervisani-list">
        <li *ngFor="let film of rezervisaniFilmovi">
            {{ film.title }}
            <button class="otkazi-button" (click)="otkaziRezervaciju(film.title)">âŒ Otkazi</button>
        </li>
    </ul>
</div>



  <!-- ğŸ“Œ Modal prozor za prikaz detalja filma -->
  <div *ngIf="selectedFilm" class="modal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
          <span class="close" (click)="closeModal()">&times;</span>
          
          <!-- ğŸ¬ Prikaz informacija o filmu -->
          <!-- ğŸ¬ Prikaz informacija o filmu -->
<h2 class="modal-title">
  {{ selectedFilm.title }}
  <span class="average-rating">â­ {{ averageRating.toFixed(1) }}</span>
</h2>

<!-- ğŸ–¼ï¸ Smanjena slika filma -->
<img class="modal-img-small" [src]="selectedFilm.poster" alt="{{ selectedFilm.title }}">

<p><strong>ReÅ¾iser:</strong> {{ selectedFilm.director.name }}</p>
<p><strong>Godina:</strong> {{ selectedFilm.startDate }}</p>
<p><strong>Å½anr:</strong> {{ selectedFilm.genre }}</p>
<p><strong>Opis:</strong> {{ selectedFilm.shortDescription }}</p>

<hr>

          <!-- â­ Ocenjivanje i komentarisanje -->
          <div class="review-container">
              <h3>Oceni film:</h3>

              <div class="rating-box">
                  <label for="rating">Ocena:</label>
                  <select id="rating" [(ngModel)]="selectedRating">
                      <option *ngFor="let r of [1, 2, 3, 4, 5]" [value]="r">{{ r }}</option>
                  </select>
              </div>

              <div class="comment-box">
                  <label for="comment">Komentar:</label>
                  <textarea id="comment" [(ngModel)]="selectedComment" placeholder="NapiÅ¡ite komentar..."></textarea>
              </div>

              <button class="save-button" (click)="submitReview()">ğŸ’¾ SaÄuvaj</button>
          </div>

          <hr>

          <!-- ğŸ’¬ Prikaz komentara sa skrolovanjem -->
<!-- ğŸ’¬ Prikaz komentara sa skrolovanjem -->
<h3>Komentari:</h3>
<ul class="comments-list">
    <li *ngFor="let review of filmReviews">
        <strong>Ocena:</strong> {{ review.rating }} â­ - {{ review.comment }}
    </li>
</ul>

<!-- ğŸ—‘ï¸ Dugme za brisanje svih komentara -->
<button class="delete-button" (click)="deleteAllReviews()">ğŸ—‘ï¸ ObriÅ¡i sve komentare</button>

      </div>
  </div>


