<div class="container">
  <h1>Lista Filmova</h1>

  <!-- üîç Input polja za pretragu -->
  <div class="search-container">
      <input type="text" class="search-bar" placeholder="Pretra≈æi po naslovu..." [(ngModel)]="searchTitle" (input)="filterMovies()">
      <input type="text" class="search-bar" placeholder="Pretra≈æi po re≈æiseru..." [(ngModel)]="searchDirector" (input)="filterMovies()">
      <input type="date" class="search-bar" [(ngModel)]="searchYear" (change)="filterMovies()" max="9999-12-31">
  </div>

  <!-- üéûÔ∏è Prikaz filmova -->
  <div class="svifilmovi">
      <div class="lista" *ngFor="let film of filteredFilmovi">
          <div class="film" (click)="openFilmDetails(film)">
              <div class="filmgore">
                  <img src="{{ film.poster }}" alt="{{ film.title }}">
              </div>
              <div class="filmdole">
                  <h2>{{ film.title }}</h2>
              </div>
          </div>
      </div>
  </div>

  <!-- üìå Modal prozor za prikaz detalja filma -->
  <div *ngIf="selectedFilm" class="modal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
          <span class="close" (click)="closeModal()">&times;</span>
          
          <!-- üé¨ Prikaz informacija o filmu -->
          <!-- üé¨ Prikaz informacija o filmu -->
<h2 class="modal-title">
  {{ selectedFilm.title }}
  <span class="average-rating">‚≠ê {{ averageRating.toFixed(1) }}</span>
</h2>

<!-- üñºÔ∏è Smanjena slika filma -->
<img class="modal-img-small" [src]="selectedFilm.poster" alt="{{ selectedFilm.title }}">

<p><strong>Re≈æiser:</strong> {{ selectedFilm.director.name }}</p>
<p><strong>Godina:</strong> {{ selectedFilm.startDate }}</p>
<p><strong>≈Ωanr:</strong> {{ selectedFilm.genre }}</p>
<p><strong>Opis:</strong> {{ selectedFilm.shortDescription }}</p>

<hr>

          <!-- ‚≠ê Ocenjivanje i komentarisanje -->
          <div class="review-container">
              <h3>Oceni film:</h3>

              <div class="rating-box">
                  <label for="rating">Ocena:</label>
                  <select id="rating" [(ngModel)]="selectedRating">
                      <option *ngFor="let r of [1, 2, 3, 4, 5]" [value]="r">{{ r }}</option>
                  </select>
              </div>

              <div class="comment-box">
                  <label for="comment">Komentar:</label>
                  <textarea id="comment" [(ngModel)]="selectedComment" placeholder="Napi≈°ite komentar..."></textarea>
              </div>

              <button class="save-button" (click)="submitReview()">üíæ Saƒçuvaj</button>
          </div>

          <hr>

          <!-- üí¨ Prikaz komentara sa skrolovanjem -->
<!-- üí¨ Prikaz komentara sa skrolovanjem -->
<h3>Komentari:</h3>
<ul class="comments-list">
    <li *ngFor="let review of filmReviews">
        <strong>Ocena:</strong> {{ review.rating }} ‚≠ê - {{ review.comment }}
    </li>
</ul>

<!-- üóëÔ∏è Dugme za brisanje svih komentara -->
<button class="delete-button" (click)="deleteAllReviews()">üóëÔ∏è Obri≈°i sve komentare</button>

      </div>
  </div>
</div>
